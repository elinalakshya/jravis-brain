# ==== MASTER RENDER CONFIG ====
# Deploys all JRAVIS + VA BOT services under one unified repo

services:
  - type: web
    name: jravis-dashboard-v5
    env: docker
    dockerfilePath: ./Dockerfile
    plan: free
    envVars:
      - key: PORT
        value: "10000"
      - key: LOCK_CODE
        value: ""

  - type: web
    name: jravis-brain
    env: docker
    dockerfilePath: ./Dockerfile
    plan: free
    envVars:
      - key: PORT
        value: "10001"
    startCommand: gunicorn jravis_brain:app --bind 0.0.0.0:10001

  - type: web
    name: mission-bridge
    env: docker
    dockerfilePath: ./Dockerfile
    plan: free
    envVars:
      - key: PORT
        value: "10002"
    startCommand: gunicorn mission_bridge:app --bind 0.0.0.0:10002

  - type: web
    name: va-bot-connector
    env: docker
    dockerfilePath: ./Dockerfile
    plan: free
    envVars:
      - key: PORT
        value: "10003"
    startCommand: gunicorn va_bot_connector:app --bind 0.0.0.0:10003

  - type: web
    name: vabot-dashboard
    env: docker
    dockerfilePath: ./Dockerfile
    plan: free
    envVars:
      - key: PORT
        value: "10004"
    startCommand: gunicorn vabot_dashboard:app --bind 0.0.0.0:10004

  - type: web
    name: income-system-bundle
    env: docker
    dockerfilePath: ./Dockerfile
    plan: free
    envVars:
      - key: PORT
        value: "10005"
    startCommand: gunicorn income_system_bundle:app --bind 0.0.0.0:10005

    services:
    - type: web
      name: jravis-core
      env: python
      buildCommand: pip install -r requirements.txt
      startCommand: python jravis_core_debian.py
      plan: free
      region: singapore


services:
- type: worker
  name: jravis-printify-connector
  env: python
  buildCommand: pip install -r requirements.txt
  startCommand: python printify_connector.py
  autoDeploy: true

services:
- type: worker
  name: jravis-printify-connector
  env: python
  region: oregon
  plan: free
  buildCommand: "pip install -r requirements.txt"
  startCommand: "python connectors/connectors_printify_connectorv3.py"
  envVars:
    - key: PRINTIFY_API_TOKEN
      sync: false
    - key: PRINTIFY_SHOP_ID
      sync: false


services:
  - type: web
    name: jravis-backend
    env: docker
    dockerfilePath: backend.Dockerfile
    plan: free

  - type: web
    name: jravis-frontend
    env: docker
    dockerfilePath: web.Dockerfile
    plan: free

cronJobs:
  - name: jravis-daily-email
    schedule: "30 4 * * *"  # 10:00 AM IST
    service: jravis-backend
    command: "python /app/email_automation_daemon.py --once"

services:
# =====================
# 1️⃣ JRAVIS Brain Core
# =====================
- type: web
  name: jravis-brain
  env: python
  plan: free
  buildCommand: "pip install -r requirements.txt"
  startCommand: "python jravis_brain.py"
  envVars:
    - key: NEXT_PUBLIC_LOCK_CODE
      value: 2X4XXXX
    - key: SYSTEM_MODE
      value: FULL_AUTONOMOUS
    - key: REGION
      value: global

# =========================
# 2️⃣ JRAVIS Bridge Service
# =========================
- type: web
  name: jravis-bridge-core
  env: python
  plan: free
  buildCommand: "pip install -r requirements.txt"
  startCommand: "python jravis_bridge_core.py"

# ==========================
# 3️⃣ VA Bot Receiver Service
# ==========================
- type: web
  name: vabot-receiver
  env: python
  plan: free
  buildCommand: "pip install -r requirements.txt"
  startCommand: "python vabot_receiver_core.py"

# ===============================
# 4️⃣ JRAVIS Dashboard (Frontend)
# ===============================
- type: web
  name: jravis-dashboard-v6
  env: node
  plan: free
  rootDir: dashboard
  buildCommand: "npm install && npm run build"
  startCommand: "npm run start"
  envVars:
    - key: NEXT_PUBLIC_API_URL
      value: https://jravis-backend.onrender.com
    - key: NEXT_PUBLIC_LOCK_CODE
      value: 2X4XXXX
    - key: NEXT_PUBLIC_SYSTEM_NAME
      value: JRAVIS Command Console

# ======================================
# 5️⃣ Mission 2040 Intelligence Worker
# ======================================
- type: background
  name: mission2040-intelligence-worker
  env: python
  plan: free
  buildCommand: "pip install -r requirements.txt"
  startCommand: "python mission2040_intelligence_worker.py"

# ======================================
# 6️⃣ Mission 2040 Memory Sync Worker
# ======================================
- type: background
  name: mission2040_memory_sync_worker
  env: python
  plan: free
  buildCommand: "pip install -r requirements.txt"
  startCommand: "python mission2040_memory_sync_worker.py"

